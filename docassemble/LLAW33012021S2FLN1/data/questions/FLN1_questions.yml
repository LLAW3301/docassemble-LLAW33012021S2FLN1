features:
  css: question.css
---
images:
  self: self_w.png
  partner: partner_w.png
  friend: friend_w.png
  carer: carer_w.png
  relative: relative_w.png
  other: other_w.png
---
include:
  - FLN1_location.yml
  - FLN1_restaurantName.yml
  - FLN1_finalScreen.yml
---
objects from file:
  - postcodes: postcodes.json
---
attachment:
  name: report
  filename: food-refusal-report-${todays_date}
  docx template file: Jinja.docx
  variable name: report
  valid formats:
    - pdf
---
template: email_template
subject: |
  Food Refusal Report | Paws Rights
content: |
  Greetings, ${refused_person.name.first}

  Your food refusal report is attached.

  Thank you,
  The Paws Rights Team
---
template: data_email_template
subject: |
  Food Refusal Report | Data Collection
content: |
   <table>
    <tbody>
      <tr>
        <td>RefusalDate</td>
        <td>${ inc_date }</td>
      </tr>
      <tr>
        <td>RefusalTime</td>
        <td>${ inc_time }</td>
      </tr>
      <tr>
        <td>RefusalPostcode</td>
        <td>${ eatery_Postcode } </td>
      </tr>
      <tr>
        <td>RefusalAddress</td>
        <td>${ eatery_Address }</td>
      </tr>
      <tr>
        <td>PersonReporting</td>
        <td>${ who_is_submitter }</td>
      </tr>
      <tr>
        <td>DidRefuserStateReason</td>
        <td>${ staffHasReason }</td>
      </tr>
      <tr>
        <td>StaffReason</td>
        <td>${ staffReason  }</td>
      </tr>
      <tr>
        <td>DidRefuserAskForAnimalID</td>
        <td>${ staffRequestedPaperwork }</td>
      </tr>
      <tr>
        <td>DidUserShowID</td>
        <td>${ IDWasShown }</td>
      </tr>
      <tr>
        <td>DidUserAttachEvidence</td>
        <td>${ supporting_evidence }</td>
      </tr>
    </tbody>
    </table>
---
question: Who is submitting the report?
field: who_is_submitter
buttons:
  - Myself: Myself
    image: self
  - Partner: Partner
    image: partner
  - Friend: Friend
    image: friend
  - Carer: Carer
    image: carer
  - Relative: Relative
    image: relative
  - Other: Other
    image: other
---
question: ${rp_namequestion}
fields:
  - First Name: refused_person.name.first
    default: Robert
  - Last Name: refused_person.name.last
    default: Piovesan
---
question: What is your full name?
fields:
  - First Name: submitter.name.first
    default: James
  - Last Name: submitter.name.last
    default: Smith
---
question: ${phonenumberquestion}
fields:
  - Phone Number: rp_phoneno
    default: 0491 577 644
    datatype: raw
comment: |
  0491 576 398 is a fake phone number from:
  https://www.acma.gov.au/choose-your-phone-number#use-phone-numbers-for-fiction
---
question: ${emailquestion}
fields:
  - Email: refused_person.email
    datatype: email
    default: piov0007@flinders.edu.au
---
question: "Did the staff state their reason for the refusal?"
fields:
  - "Yes/No" : staffHasReason
    datatype: yesnoradio
  - "What was said by the staff during the refusal?" : staffReason
    input type: area
    default: |
      No dogs are allowed due to allergies
    show if:
      variable: staffHasReason
      is: True
---
question: "Were you asked to show accredited Assistance Dog identification or paperwork?"
fields:
  - "Yes/No" : staffRequestedPaperwork
    datatype: yesnoradio
  - "Was ID provided?" : IDWasShown
    datatype: yesnoradio
    show if:
      variable: staffRequestedPaperwork
      is: True
---
question: "When did the incident occur?"
subquestion: "This defaults to todayâ€™s date, but you can edit it if needed"
fields:
  - Date: inc_date
    datatype: date
    default: |
      ${ today() }
---
question: "When did the incident occur?"
subquestion: "This defaults to the current time, but you can edit it if needed"
fields:
  - Time: inc_time
    datatype: time
    default: |
      ${ current_time }
---
question: Do you have any supporting evidence you want to attach?
yesno: supporting_evidence
---
question: |
  Please attach any supporting files e.g. screenshots or photos
subquestion: |
  <i>accepted file type: <b>jpeg</b></i>
fields:
  - Attachments: attached_evidence
    datatype: files
    accept: |
      "image/jpeg"
---
include:
  - FLN1_review.yml
